#!/bin/sh
source /opt/fulltext/venv/bin/activate
source /opt/fulltext/secrets

export PATH="/opt/fulltext/arxiv-fulltext:$PATH"

nohup java -cp /opt/fulltext/jars/amazon-kinesis-client-1.7.6.jar:/opt/fulltext/jars/aws-java-sdk-cloudwatch-1.11.151.jar:/opt/fulltext/jars/aws-java-sdk-core-1.11.151.jar:/opt/fulltext/jars/aws-java-sdk-dynamodb-1.11.151.jar:/opt/fulltext/jars/aws-java-sdk-kinesis-1.11.151.jar:/opt/fulltext/jars/aws-java-sdk-kms-1.11.151.jar:/opt/fulltext/jars/aws-java-sdk-s3-1.11.151.jar:/opt/fulltext/jars/commons-codec-1.9.jar:/opt/fulltext/jars/commons-lang-2.6.jar:/opt/fulltext/jars/commons-logging-1.1.3.jar:/opt/fulltext/jars/guava-18.0.jar:/opt/fulltext/jars/httpclient-4.5.2.jar:/opt/fulltext/jars/httpcore-4.4.4.jar:/opt/fulltext/jars/ion-java-1.0.2.jar:/opt/fulltext/jars/jackson-annotations-2.6.0.jar:/opt/fulltext/jars/jackson-core-2.6.6.jar:/opt/fulltext/jars/jackson-databind-2.6.6.jar:/opt/fulltext/jars/jackson-dataformat-cbor-2.6.6.jar:/opt/fulltext/jars/jmespath-java-1.11.151.jar:/opt/fulltext/jars/joda-time-2.8.1.jar:/opt/fulltext/jars/protobuf-java-2.6.1.jar:/opt/fulltext/arxiv-fulltext com.amazonaws.services.kinesis.multilang.MultiLangDaemon /opt/fulltext/bin/agent.properties >> /var/log/fulltext-agent.log 2>&1&
echo $!
